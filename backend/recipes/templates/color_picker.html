<style>
    .color-square { width: 20px; height: 20px; border: 1px solid #000; cursor: pointer; }
    .color-square.selected { border: 2px solid #000; }
</style>
<div style="display: grid; grid-template-columns: repeat(9, 1fr); gap: 5px;">
    {% for hex_value in color_choices %}
        <div class="color-square{% if hex_value == value %} selected{% endif %}" style="background-color: {{ hex_value }}" onclick="selectColor(this, '{{ input_name }}')"></div>
    {% endfor %}
</div>
<input type="hidden" name="{{ input_name }}" value="{{ value }}">
<script>
    function selectColor(element, inputName) {
        document.querySelectorAll('.color-square').forEach(div => div.classList.remove('selected'));
        element.classList.add('selected');
        document.querySelector('input[name="' + inputName + '"]').value = element.style.backgroundColor;
    }
</script>